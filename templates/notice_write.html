{% extends "base.html" %}
{% block title %}공지 작성 - 소리가 담긴 타임머신{% endblock %}

{% block content %}
<div class="notice-page-wrapper">
    <div class="page-title">새 공지 작성</div>

    <form method="POST" enctype="multipart/form-data" class="content-form" id="notice-form">
        <select name="category" required>
            <option value="일반공지">일반공지</option>
            <option value="방송공지">방송공지</option>
            <option value="패치노트">패치노트</option>
        </select>

        <input type="text" name="title" placeholder="제목" required>

        {# 실제 서버로 전송될 textarea (숨김) #}
        <textarea name="content" id="notice-content" hidden></textarea>

        {# Toast UI Editor가 들어갈 영역 #}
        <div id="toast-editor"></div>

        <label>이미지 첨부 (선택)</label>
        <input type="file" name="image" accept="image/*">

        <button type="submit" class="btn" style="margin-top:10px;">등록</button>
    </form>
</div>

<script>
    // Toast UI Editor 생성
    const { Editor } = toastui;

    const editor = new Editor({
        el: document.querySelector('#toast-editor'),
        height: '500px',
        initialEditType: 'wysiwyg',
        previewStyle: 'vertical',
        language: 'ko',
        toolbarItems: [
            ['heading', 'bold', 'italic', 'strike'],
            ['hr', 'quote'],
            ['ul', 'ol', 'task'],
            ['table', 'link'],
            ['image', 'code', 'codeblock']
        ],
        plugins: [toastui.Editor.plugin.colorSyntax]
    });

    const form = document.getElementById('notice-form');
    form.addEventListener('submit', function () {
        const textarea = document.getElementById('notice-content');
        textarea.value = editor.getHTML();
    });
</script>
{% endblock %}

