{% extends "base.html" %}
{% block title %}프로필{% endblock %}

{% block content %}
<h1 class="page-title">프로필 설정</h1>
<div class="card">
    <p>
        현재 닉네임 :
        <span class="nickname-label"
              style="background: {{ current_user.display_color or '#444' }};">
            {{ current_user.username }}
        </span>
        {% if current_user.title %}
            {# title_style: basic / pill / outline / ribbon / glow #}
            <span class="title-badge title-style-{{ current_user.title_style or 'basic' }}"
                  style="--title-main-color: {{ current_user.title_color or '#ff6fb5' }};">
                {{ current_user.title }}
            </span>
        {% endif %}
        <span style="font-size:12px;color:#666;"> (직급: {{ current_user.role }})</span>
    </p>

    <p style="font-size:13px;color:#777;">
        경고: {{ current_user.warnings or 0 }}회 /
        정지 상태:
        {% if current_user.is_banned %}
            <span style="color:#e53935;">정지됨</span>
        {% else %}
            <span style="color:#4caf50;">정상</span>
        {% endif %}
    </p>

    <p style="font-size:13px;color:#555; margin-top:4px;">
        저화 소유금 :
        <strong>{{ current_user.coins or 0 }} 장</strong>
        <a href="{{ url_for('coin_page') }}"
            class="btn"
            style="margin-left:6px; padding:4px 10px; font-size:12px;">
            저화 얻기
        </a>
    </p>

    <form method="post">
        <label>닉네임 변경</label>
        <input type="text" name="username" value="{{ current_user.username }}">

        <label>닉네임 색상</label>
        <input type="color" name="display_color" value="{{ current_user.display_color or '#ff6fb5' }}">

        <hr style="margin:15px 0;">

        <label>칭호 텍스트</label>
        <input type="text" name="title_text" value="{{ current_user.title or '' }}" placeholder="예: STREAMER, MANAGER">

        <label>칭호 스타일</label>
        {% set cur_style = current_user.title_style or 'basic' %}
        <select name="title_style">
            <option value="basic"   {% if cur_style == 'basic' %}selected{% endif %}>기본 뱃지</option>
            <option value="pill"    {% if cur_style == 'pill' %}selected{% endif %}>둥근 알약형</option>
            <option value="outline" {% if cur_style == 'outline' %}selected{% endif %}>테두리만 있는 뱃지</option>
            <option value="ribbon"  {% if cur_style == 'ribbon' %}selected{% endif %}>리본형</option>
            <option value="glow"    {% if cur_style == 'glow' %}selected{% endif %}>네온</option>
        </select>

        <label>칭호 메인 색상</label>
        <input type="color" name="title_color" value="{{ current_user.title_color or '#ff6fb5' }}">

        <button type="submit" class="btn" style="margin-top:10px;">저장</button>
    </form>
</div>
{% endblock %}
