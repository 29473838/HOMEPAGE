{% extends "base.html" %}
{% block title %}ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ{% endblock %}

{% block content %}
<h1 class="page-title">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>

<!-- ìµœê·¼ ê°€ì… ìœ ì € -->
<div class="card">
    <h3>ìµœê·¼ ê°€ì… ìœ ì €</h3>
    {% if users.items %}
    <table class="admin-table">
        <tr>
            <th>ID</th>
            <th>ë‹‰ë„¤ì„</th>
            <th>ì§ê¸‰</th>
            <th>ì´ë©”ì¼</th>
        </tr>
        {% for u in users.items %}
        <tr>
            <td>{{ u.id }}</td>
            <td>{{ u.username }}</td>
            <td>{{ u.role }}</td>
            <td>{{ u.email }}</td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
        <p>ê°€ì…í•œ ìœ ì €ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}

    <!-- ğŸ‘‡ ìœ ì € í˜ì´ì§€ë„¤ì´ì…˜ -->
    <div class="pagination">
        {% if users.has_prev %}
            <a href="{{ url_for('dashboard', page=users.prev_num) }}">ì´ì „</a>
        {% endif %}

        {% for page_num in users.iter_pages() %}
            {% if page_num %}
                {% if page_num == users.page %}
                    <strong>[{{ page_num }}]</strong>
                {% else %}
                    <a href="{{ url_for('dashboard', page=page_num) }}">{{ page_num }}</a>
                {% endif %}
            {% else %}
                ...
            {% endif %}
        {% endfor %}

        {% if users.has_next %}
            <a href="{{ url_for('dashboard', page=users.next_num) }}">ë‹¤ìŒ</a>
        {% endif %}
    </div>
</div>

<!-- ìµœê·¼ ë¬¸ì˜ ê¸°ë¡ -->
<div class="card">
    <h3>ìµœê·¼ ë¬¸ì˜</h3>
    {% if tickets.items %}
        {% for t in tickets.items %}
        <div class="ticket-row">
            <strong>[{{ t.title }}]</strong>
            <span>{{ t.email }}</span>
            <span style="float:right;color:#888;">{{ t.created_at.strftime("%Y-%m-%d %H:%M") }}</span>
        </div>
        {% endfor %}
    {% else %}
        <p>ë¬¸ì˜ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}

    <!-- ğŸ‘‡ ë¬¸ì˜ í˜ì´ì§€ë„¤ì´ì…˜ -->
    <div class="pagination">
        {% if tickets.has_prev %}
            <a href="{{ url_for('dashboard', page=tickets.prev_num) }}">ì´ì „</a>
        {% endif %}

        {% for page_num in tickets.iter_pages() %}
            {% if page_num %}
                {% if page_num == tickets.page %}
                    <strong>[{{ page_num }}]</strong>
                {% else %}
                    <a href="{{ url_for('dashboard', page=page_num) }}">{{ page_num }}</a>
                {% endif %}
            {% else %}
                ...
            {% endif %}
        {% endfor %}

        {% if tickets.has_next %}
            <a href="{{ url_for('dashboard', page=tickets.next_num) }}">ë‹¤ìŒ</a>
        {% endif %}
    </div>
</div>

{% endblock %}

